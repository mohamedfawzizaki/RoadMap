__________________________________________________________________________________________________________________________
#                                         Serverless Pricing Model

## üîç What is Serverless in AWS?

**Serverless** doesn‚Äôt mean ‚Äúno servers.‚Äù It means:

* **No server management** by you
* **Automatic scaling**
* **Pay only for actual usage** (invocations, duration, storage, or messages)
* **Event-driven** execution model

> üß† Ideal for modern architectures: microservices, event buses, APIs, queues, cron jobs, data streaming, ML pipelines.

---

## üß© Key AWS Serverless Services

| Category          | Service                              | Billed By                               |
| ----------------- | ------------------------------------ | --------------------------------------- |
| Compute           | **AWS Lambda**                       | Invocations + duration (GB-sec)         |
| API               | **Amazon API Gateway**               | Requests                                |
| Orchestration     | **Step Functions**                   | State transitions                       |
| Messaging         | **Amazon SQS / SNS**                 | Requests/messages                       |
| Storage           | **Amazon S3**                        | Storage + request-based                 |
| NoSQL DB          | **Amazon DynamoDB (on-demand)**      | Reads/writes                            |
| Event Bus         | **Amazon EventBridge**               | Events                                  |
| DB                | **Aurora Serverless v2**             | ACUs (Aurora Capacity Units) per second |
| Stream Processing | **Kinesis Data Streams (on-demand)** | Shard capacity or data volume           |
| Identity          | **Cognito**                          | MAUs (Monthly Active Users)             |

---

## üí∞ Serverless Pricing Principles

| Component                 | Description                                        |
| ------------------------- | -------------------------------------------------- |
| ‚ö° **Invocation-based**   | You pay only when code is triggered (e.g., Lambda) |
| ‚è±Ô∏è **Time-based billing** | Priced per millisecond or second of usage          |
| üß† **Memory-based**       | Often priced by **GB-seconds** of memory usage     |
| üì® **Request-based**      | For APIs, queues, events, messages                 |
| üö´ **No idle charge**     | No cost when nothing is running                    |

---

## üßÆ Example: AWS Lambda Pricing

### üßæ Pricing Components:

| Item                    | Cost                                                    |
| ----------------------- | ------------------------------------------------------- |
| First 1M requests/month | **Free**                                                |
| Additional requests     | **\$0.20 per 1M**                                       |
| Duration                | **\$0.00001667 per GB-second**                          |
| Additional features     | Provisioned Concurrency, SnapStart (charged separately) |

> Lambda duration is measured from the time your function starts executing to when it returns or terminates, rounded up to the nearest millisecond.

### Example:

You run a Lambda function:

* 128 MB memory
* Runs for 200 ms
* 2 million requests/month

**Total cost:**

* Requests: (2M - 1M free) = 1M √ó \$0.20 = **\$0.20**
* Duration:
  128 MB = 0.125 GB
  0.125 GB √ó 200 ms = 0.025 GB-sec
  2M √ó 0.025 = 50,000 GB-sec
  50,000 √ó \$0.00001667 = **\$0.83**

**Total Monthly Cost: ‚âà \$1.03**

---

## üìä Serverless Cost Examples by Service

| Service                          | Billed By           | Free Tier            | Notes                                    |
| -------------------------------- | ------------------- | -------------------- | ---------------------------------------- |
| Lambda                           | Requests + duration | 1M req + 400K GB-sec | Memory from 128 MB to 10 GB              |
| API Gateway                      | Requests            | 1M/month             | REST = \$3.50/M req, HTTP = \$1.00/M req |
| DynamoDB (On-Demand)             | Read/write req      | ‚Äî                    | \$1.25/1M writes, \$0.25/1M reads        |
| SQS                              | Messages            | 1M/month             | \$0.40/1M std messages                   |
| Step Functions                   | State transitions   | 4K/month             | \$0.025/1K transitions                   |
| EventBridge                      | Events              | 100K/month           | \$1.00/million events                    |
| Aurora Serverless v2             | ACUs/sec            | ‚Äî                    | Charged per second, per ACU used         |
| Kinesis Data Streams (On-Demand) | Records + data      | ‚Äî                    | \$0.013 per million records              |

---

## ‚úÖ Pros of Serverless Pricing

| Advantage                   | Description                                              |
| --------------------------- | -------------------------------------------------------- |
| üíµ **Pay-per-use**          | Pay only when your app runs or receives traffic          |
| üöÄ **Auto-scaling**         | Automatically handles thousands of concurrent executions |
| üßò **Zero idle cost**       | Great for low-traffic or bursty workloads                |
| üß± **Modular billing**      | Break down cost by function, endpoint, or event          |
| üåé **Global & distributed** | No need to deploy infrastructure manually across regions |

---

## ‚ùå Cons of Serverless Pricing

| Drawback                              | Description                                                   |
| ------------------------------------- | ------------------------------------------------------------- |
|  **Unpredictable bills**              | Without limits, costs can spike on traffic surges             |
|  **Cold starts**                      | Functions may take 100ms‚Äì1s on first call (especially in VPC) |
|  **Complex billing structure**        | Multiple small charges across services                        |
|  **Harder to forecast**               | Difficult if usage pattern is not yet known                   |
|  **Not ideal for long-running tasks** | Max duration limit (15 mins for Lambda)                       |

---

## üìç Real-World Use Case

### Event-Driven Image Processing System:

| Component            | AWS Service          | Pricing Model                    |
| -------------------- | -------------------- | -------------------------------- |
| Frontend file upload | S3                   | Per GB + PUT request             |
| Trigger              | S3 ‚Üí Lambda          | Invocation + duration            |
| Processor            | Lambda               | Pay for 128 MB √ó processing time |
| Output               | Store to DynamoDB    | On-demand writes                 |
| Notify user          | SNS                  | Pay per message                  |
| API for status       | API Gateway + Lambda | Pay per request                  |

> With a few thousand uploads per month, this architecture might cost **less than \$10/month**.

---

## üõ°Ô∏è Serverless Budget Protection

| Feature                           | Use                                    |
| --------------------------------- | -------------------------------------- |
| **Lambda concurrency limits**     | Prevent over-invocation + cost spikes  |
| **API Gateway throttling**        | Control request rate per second        |
| **CloudWatch + Budgets**          | Set alerts for function costs or usage |
| **Auto-delete failed messages**   | For SQS DLQs to avoid cost buildup     |
| **Request validation in Gateway** | Block invalid payloads early           |

---

## üìå Summary Table

| Component     | Serverless Model     | Cost Model                         |
| ------------- | -------------------- | ---------------------------------- |
| Compute       | AWS Lambda           | Per request + per GB-sec           |
| APIs          | API Gateway          | Per API call                       |
| Orchestration | Step Functions       | Per state transition               |
| DB            | DynamoDB (On-Demand) | Per read/write request             |
| Messaging     | SQS/SNS              | Per message                        |
| Events        | EventBridge          | Per event ingested                 |
| Storage       | S3                   | Per GB + requests                  |
| DB            | Aurora Serverless v2 | Per second of capacity usage (ACU) |

---

## üß† Serverless vs Other Pricing Models

| Feature      | Serverless                  | On-Demand EC2   | Provisioned                 |
| ------------ | --------------------------- | --------------- | --------------------------- |
| Idle cost    | \$0                         | \$\$            | \$\$\$                      |
| Scaling      | Automatic                   | Manual or auto  | Manual or semi-auto         |
| Billing unit | Requests, duration          | Hour            | Hour or reserved throughput |
| Cold start   | Yes (sometimes)             | No              | No                          |
| Best for     | APIs, microservices, events | General compute | Predictable workloads       |

---
