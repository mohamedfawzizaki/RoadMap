In Helm, **values files** are YAML files used to **supply configuration values** to templates. They allow you to customize your chartâ€™s behavior and output **without modifying the templates themselves**.

---

## ğŸ§¾ What Are Values Files?

* The main file is `values.yaml` in your chart root.
* You can override or supplement this by passing:

  * `--values custom-values.yaml`
  * `--set key=value`
  * `--set-file key=path/to/file`

---

## ğŸ“ Example Structure

```
mychart/
â”œâ”€â”€ Chart.yaml
â”œâ”€â”€ values.yaml              # Default values
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ deployment.yaml
â””â”€â”€ values/
    â”œâ”€â”€ dev.yaml             # Dev environment values
    â”œâ”€â”€ prod.yaml            # Production environment values
```

---

## ğŸ§  How Helm Merges Values

Helm merges values using this precedence (lowest to highest):

1. `values.yaml` (default)
2. Files passed with `--values` or `-f`
3. Inline with `--set`
4. Files with `--set-file`

ğŸ“ Later values override earlier ones.

---

## ğŸ§ª Example `values.yaml`

```yaml
replicaCount: 3

image:
  repository: nginx
  tag: stable
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80

resources:
  limits:
    cpu: "500m"
    memory: "128Mi"
  requests:
    cpu: "250m"
    memory: "64Mi"

env:
  - name: ENVIRONMENT
    value: production
```

---

## ğŸ§± Accessing Values in Templates

Inside a template (e.g., `deployment.yaml`):

```yaml
spec:
  replicas: {{ .Values.replicaCount }}
  containers:
    - name: app
      image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
      imagePullPolicy: {{ .Values.image.pullPolicy }}
```

---

## ğŸ¯ Overriding Values

### Inline

```bash
helm install myapp ./mychart --set replicaCount=5,image.tag=latest
```

### From file

```bash
helm install myapp ./mychart -f values/prod.yaml
```

You can use multiple `-f` files and theyâ€™ll be merged:

```bash
helm install myapp ./mychart -f values/base.yaml -f values/prod.yaml
```

---

## ğŸ” Using `--set-file`

Use this to load secret data from files:

```bash
helm install myapp ./mychart --set-file config.json=./config.json
```

Inside your template:

```yaml
data:
  config.json: {{ .Values.config.json | indent 2 }}
```

---

## ğŸ§© Advanced Values Tips

### âœ… Nested Structures

You can deeply nest values:

```yaml
postgres:
  enabled: true
  config:
    username: admin
    password: secret
```

Access it in a template:

```yaml
{{ .Values.postgres.config.username }}
```

---

### âœ… Default Fallbacks

You can use `default` in templates:

```yaml
{{ .Values.image.tag | default "latest" }}
```

---

### âœ… Environment-Specific Values (Best Practice)

Use different files for different environments:

```bash
helm install myapp ./mychart -f values/dev.yaml
helm install myapp ./mychart -f values/prod.yaml
```

---

## ğŸ” Debugging Values

You can render templates with values to inspect them:

```bash
helm template myapp ./mychart -f values/dev.yaml
```

You can also output the merged values:

```bash
helm get values myapp
```

---
