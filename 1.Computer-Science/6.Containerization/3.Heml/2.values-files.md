In Helm, **values files** are YAML files used to **supply configuration values** to templates. They allow you to customize your chart’s behavior and output **without modifying the templates themselves**.

---

## 🧾 What Are Values Files?

* The main file is `values.yaml` in your chart root.
* You can override or supplement this by passing:

  * `--values custom-values.yaml`
  * `--set key=value`
  * `--set-file key=path/to/file`

---

## 📁 Example Structure

```
mychart/
├── Chart.yaml
├── values.yaml              # Default values
├── templates/
│   └── deployment.yaml
└── values/
    ├── dev.yaml             # Dev environment values
    ├── prod.yaml            # Production environment values
```

---

## 🧠 How Helm Merges Values

Helm merges values using this precedence (lowest to highest):

1. `values.yaml` (default)
2. Files passed with `--values` or `-f`
3. Inline with `--set`
4. Files with `--set-file`

📝 Later values override earlier ones.

---

## 🧪 Example `values.yaml`

```yaml
replicaCount: 3

image:
  repository: nginx
  tag: stable
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80

resources:
  limits:
    cpu: "500m"
    memory: "128Mi"
  requests:
    cpu: "250m"
    memory: "64Mi"

env:
  - name: ENVIRONMENT
    value: production
```

---

## 🧱 Accessing Values in Templates

Inside a template (e.g., `deployment.yaml`):

```yaml
spec:
  replicas: {{ .Values.replicaCount }}
  containers:
    - name: app
      image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
      imagePullPolicy: {{ .Values.image.pullPolicy }}
```

---

## 🎯 Overriding Values

### Inline

```bash
helm install myapp ./mychart --set replicaCount=5,image.tag=latest
```

### From file

```bash
helm install myapp ./mychart -f values/prod.yaml
```

You can use multiple `-f` files and they’ll be merged:

```bash
helm install myapp ./mychart -f values/base.yaml -f values/prod.yaml
```

---

## 🔐 Using `--set-file`

Use this to load secret data from files:

```bash
helm install myapp ./mychart --set-file config.json=./config.json
```

Inside your template:

```yaml
data:
  config.json: {{ .Values.config.json | indent 2 }}
```

---

## 🧩 Advanced Values Tips

### ✅ Nested Structures

You can deeply nest values:

```yaml
postgres:
  enabled: true
  config:
    username: admin
    password: secret
```

Access it in a template:

```yaml
{{ .Values.postgres.config.username }}
```

---

### ✅ Default Fallbacks

You can use `default` in templates:

```yaml
{{ .Values.image.tag | default "latest" }}
```

---

### ✅ Environment-Specific Values (Best Practice)

Use different files for different environments:

```bash
helm install myapp ./mychart -f values/dev.yaml
helm install myapp ./mychart -f values/prod.yaml
```

---

## 🔎 Debugging Values

You can render templates with values to inspect them:

```bash
helm template myapp ./mychart -f values/dev.yaml
```

You can also output the merged values:

```bash
helm get values myapp
```

---
