# ================================================================================
# ğŸ“˜ ClusterRoleBinding: Grants cluster-wide access by binding subjects to a ClusterRole
# --------------------------------------------------------------------------------
# A ClusterRoleBinding binds a ClusterRole (cluster-wide permissions) to a subject:
#   - User (external identity)
#   - Group (from auth provider)
#   - ServiceAccount (internal automation or workload)
#
# âœ… Used when you need access across all namespaces or to non-namespaced resources (e.g., nodes).
# ğŸ” Common for CI/CD systems, cluster admins, monitoring agents, etc.
# ================================================================================

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: ci-clusterrolebinding                   # ğŸ†” Logical name
subjects:
  - kind: ServiceAccount                        # ğŸ‘¤ Can also be: User or Group
    name: jenkins-sa                            # ğŸ¤– ServiceAccount in a namespace
    namespace: cicd                             # ğŸ” Must be specified for ServiceAccounts
roleRef:
  kind: ClusterRole                             # ğŸ”— Binding to a cluster-wide role
  name: ci-clusterrole                          # ğŸ” Role must exist (see ClusterRole manifest)
  apiGroup: rbac.authorization.k8s.io


---


apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: mon-clusterrolebinding                   # ğŸ†” Logical name
subjects:
  - kind: ServiceAccount
    name: prometheus                            # ğŸ§ª Name of ServiceAccount
    namespace: monitoring                       # ğŸ” Required for ServiceAccounts
roleRef:
  kind: ClusterRole                             # ğŸ”— Binding to a cluster-wide role
  name: mon-clusterrole                          # ğŸ” Role must exist (see ClusterRole manifest)
  apiGroup: rbac.authorization.k8s.io
