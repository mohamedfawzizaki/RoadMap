___________________________________________________________________________________________________________________________


---

## 🧭 What is a Namespace in Kubernetes?

A **namespace** is a **virtual cluster** within a physical Kubernetes cluster. It **logically isolates** resources, making it easier to organize, manage, and control access in multi-tenant or complex environments.

---

## 🧱 Key Characteristics of Namespaces

| Feature               | Description                                                                 |
| --------------------- | --------------------------------------------------------------------------- |
| **Logical isolation** | Resources like Pods, Services, ConfigMaps, etc., live in namespaces.        |
| **Scoped resources**  | Most Kubernetes objects are **namespaced**, meaning they're created in one. |
| **Global resources**  | Some objects are **not namespaced** (e.g., `nodes`, `ClusterRole`).         |
| **Multi-tenancy**     | Used to safely run multiple projects or teams in the same cluster.          |

---

## 📘 Common Use Cases

1. **Multi-environment separation**: dev, staging, production
2. **Multi-tenant clusters**: different teams or applications
3. **RBAC isolation**: grant different permissions in different namespaces
4. **Resource quotas & limits**: restrict usage per namespace

---

## 📂 Namespaced vs. Cluster-wide Resources

| Namespaced Resources              | Cluster-scoped Resources             |
| --------------------------------- | ------------------------------------ |
| Pods, Services, Deployments, etc. | Nodes, PersistentVolumes, Namespaces |
| ConfigMaps, Secrets               | ClusterRoles, ClusterRoleBindings    |
| ResourceQuotas, LimitRanges       | CustomResourceDefinitions (CRDs)     |

---

## ⚙️ Default Namespaces in Kubernetes

Kubernetes comes with **predefined namespaces**:

| Namespace         | Purpose                                                   |
| ----------------- | --------------------------------------------------------- |
| `default`         | The default namespace for user-created objects            |
| `kube-system`     | System components (kube-dns, controller manager, etc.)    |
| `kube-public`     | Publicly readable data (config info shared cluster-wide)  |
| `kube-node-lease` | Used for heartbeat/lease objects for node health checking |

---

## 🔧 Creating and Managing Namespaces

### ✅ Create a Namespace

```bash
kubectl create namespace dev
```

Or using YAML:

```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: dev
```

```bash
kubectl apply -f namespace.yaml
```

---

### ✅ View Namespaces

```bash
kubectl get namespaces
```

---

### ✅ Use a Namespace Temporarily

```bash
kubectl get pods -n dev
```

---

### ✅ Set a Default Namespace (Context-specific)

```bash
kubectl config set-context --current --namespace=dev
```

---

### ✅ Delete a Namespace

```bash
kubectl delete namespace dev
```

⚠️ This deletes **all resources** inside it—use with caution.

---

## 🎯 Example: Namespaced Resources

```bash
kubectl create deployment nginx -n dev --image=nginx
kubectl get pods -n dev
```

---

## 📐 ResourceQuota & LimitRange (Namespace-Scoped)

You can **control resource consumption** per namespace.

### Example: Set Resource Quotas

```yaml
apiVersion: v1
kind: ResourceQuota
metadata:
  name: dev-quota
  namespace: dev
spec:
  hard:
    pods: "10"
    requests.cpu: "2"
    limits.memory: "4Gi"
```

### Example: Set Default Limits

```yaml
apiVersion: v1
kind: LimitRange
metadata:
  name: dev-limit-range
  namespace: dev
spec:
  limits:
  - default:
      cpu: 500m
      memory: 256Mi
    defaultRequest:
      cpu: 200m
      memory: 128Mi
    type: Container
```

---

## 🔐 Namespaces and RBAC

You can apply **RoleBindings** to restrict access **within a namespace**.

```bash
kubectl create rolebinding dev-reader \
  --clusterrole=view \
  --user=alice \
  --namespace=dev
```

---

## 🧪 Best Practices

| Tip                                    | Why                                                      |
| -------------------------------------- | -------------------------------------------------------- |
| Use namespaces per team/env            | For isolation and easier cleanup                         |
| Set quotas and limits                  | To prevent noisy neighbor problems                       |
| Use `kubens` / `kubectx` CLI tools     | Easy switching between namespaces                        |
| Avoid putting everything in `default`  | Encourages chaos, security issues, and poor organization |
| Automate namespace creation with CI/CD | Consistent, reproducible environments                    |

---
