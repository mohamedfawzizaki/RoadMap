___________________________________________________________________________________________________________________________

---

## üì¶ What is a ConfigMap?

A **ConfigMap** is a Kubernetes API object used to **store non-confidential configuration data in key-value pairs**. It allows you to separate configuration artifacts from image content, making apps more portable and easier to manage.

> Unlike Secrets, ConfigMaps are **not meant for sensitive data**.

---

## üîç Why use ConfigMaps?

* Decouple configuration from container images
* Share configuration data across multiple pods
* Dynamically update configuration without rebuilding images
* Provide environment variables, command-line arguments, or config files to containers

---

## üßæ Basic ConfigMap Example

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-config
data:
  app.properties: |
    log_level=debug
    max_connections=100
  database_url: "postgres://user:password@db.example.com:5432/mydb"
```

This example stores two keys:

* `app.properties` (multiline string)
* `database_url` (single-line string)

---

## üîë Key Sections

| Field        | Description                                       |
| ------------ | ------------------------------------------------- |
| `metadata`   | Metadata including `name` and optional labels     |
| `data`       | Key-value pairs (string) representing config data |
| `binaryData` | Base64-encoded binary data (optional)             |

---

## üì§ How to Use ConfigMaps in Pods

### 1. As Environment Variables

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: env-pod
spec:
  containers:
  - name: app
    image: nginx
    envFrom:
    - configMapRef:
        name: my-config
```

All keys in `my-config` will be exposed as environment variables in the container.

---

### 2. As Individual Environment Variables

```yaml
env:
- name: DB_URL
  valueFrom:
    configMapKeyRef:
      name: my-config
      key: database_url
```

---

### 3. As Mounted Files in Volumes

```yaml
volumes:
- name: config-volume
  configMap:
    name: my-config
containers:
- name: app
  image: nginx
  volumeMounts:
  - name: config-volume
    mountPath: /etc/config
```

Keys become files inside `/etc/config`, each key is a file, contents is the value.

---

## üß© Important Notes

* If ConfigMap keys or names change, pods must be restarted to see changes (unless the volume is mounted and the app watches file changes).
* ConfigMaps are **namespace-scoped**.
* Use **`binaryData`** for non-UTF8 or binary data.

---

## üß™ Create ConfigMap via CLI

* From literal key-value:

```bash
kubectl create configmap my-config --from-literal=log_level=debug --from-literal=max_connections=100
```

* From file:

```bash
kubectl create configmap my-config --from-file=app.properties
```

---

## üõ° Security Considerations

* ConfigMaps are **not encrypted**.
* Avoid putting secrets here; use `Secret` for sensitive data.
* Access control via RBAC can restrict who can read ConfigMaps.

---

## Example: Full YAML for ConfigMap + Pod using it as env and volume

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: example-config
data:
  APP_MODE: "production"
  LOG_LEVEL: "info"
  config.yaml: |
    key1: value1
    key2: value2
---
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
  - name: app
    image: nginx
    env:
    - name: APP_MODE
      valueFrom:
        configMapKeyRef:
          name: example-config
          key: APP_MODE
    volumeMounts:
    - name: config-volume
      mountPath: /etc/config
  volumes:
  - name: config-volume
    configMap:
      name: example-config
```

---

## Summary

| Feature   | Details                                    |
| --------- | ------------------------------------------ |
| Scope     | Namespace-scoped                           |
| Data      | Key-value pairs (strings), or binaryData   |
| Use Cases | Environment variables, config files        |
| Updating  | Requires pod restart unless volume-mounted |
| Security  | Not encrypted, not for secrets             |

---
